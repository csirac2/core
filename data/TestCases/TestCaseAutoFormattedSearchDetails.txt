%META:TOPICINFO{author="BaseUserMapping_333" date="1246078286" format="1.1" version="1.1"}%
%META:TOPICPARENT{name="WebHome"}%
---+!! %TOPIC%

testing to let me refactor the format= functionality in foswiki 1.1

The major risk is the default formatting where web's are separated - for paging and FOREACH we need to turn that off.

[[%SCRIPTURLPATH{"view"}%/%WEB%/%TOPIC%?test=compare&debugenableplugins=TestFixturePlugin&skin=pattern][run this test]]


---++ default search formatting
---+++ Expected
<!-- expected expand rex old Tmwiki default multi-weboutput 4 webs -->
<span class="patternSearched">Searched: <b><noautolink>(WebPreferences|WebStatistics|WebHome)$</noautolink></b></span><span id="foswikiNumberOfResultsContainer"></span><span id="foswikiModifySearchContainer"></span>
<h4 class="patternSearchResultsHeader" style="background-color:yellow"><span class="foswikiLeft"><b>Results from TestCases web</b> retrieved at @TIME (@REX(GMT|Local))</span><span class="foswikiRight"></span><br class="foswikiClear" /></h4><div class="patternSearchResult"><div class="foswikiTopRow"><div class="foswikiLeft"><a href="/trunk/bin/view/TestCases/WebHome"><b>WebHome</b></a></div><div class="foswikiRight foswikiSRAuthor"> <a href="%SCRIPTURLPATH{"view"}%/%USERSWEB%/@WIKIWORD">@WIKIWORD</a></div><div class="foswikiRight foswikiSRRev"><span class="foswikiNew">NEW</span> - <a href="/trunk/bin/rdiff/TestCases/WebHome" rel='nofollow'>@DATE - @TIME</a>&nbsp;</div><br class="foswikiClear" /></div><!--/foswikiTopRow--><div class="foswikiBottomRow"><div class="foswikiSummary foswikiGrayText">TestCases Web If you are here, you want to test this version of Foswiki. This web is held in the Foswiki Subversion repository, so: 1 You must manually ensure that ...</div><!--/foswikiSummary-->

</div><!--/foswikiBottomRow--></div><!--/patternSearchResult--><div class="patternSearchResult"><div class="foswikiTopRow"><div class="foswikiLeft"><a href="/trunk/bin/view/TestCases/WebPreferences"><b>WebPreferences</b></a></div><div class="foswikiRight foswikiSRAuthor"> <a href="%SCRIPTURLPATH{"view"}%/%USERSWEB%/@WIKIWORD">@WIKIWORD</a></div><div class="foswikiRight foswikiSRRev"><span class="foswikiNew">NEW</span> - <a href="/trunk/bin/rdiff/TestCases/WebPreferences" rel='nofollow'>@DATE - @TIME</a>&nbsp;</div><br class="foswikiClear" /></div><!--/foswikiTopRow--><div class="foswikiBottomRow"><div class="foswikiSummary foswikiGrayText">nop TestCases Web Preferences Set BROADCASTMESSAGE NOTE: This is the nop TestCases web. You cannot edit any topic named "TestCase..." or "Web..." in this web ...</div><!--/foswikiSummary-->
</div><!--/foswikiBottomRow--></div><!--/patternSearchResult--><div class="patternSearchResult"><div class="foswikiTopRow"><div class="foswikiLeft"><a href="/trunk/bin/view/TestCases/WebStatistics"><b>WebStatistics</b></a></div><div class="foswikiRight foswikiSRAuthor"> <a href="%SCRIPTURLPATH{"view"}%/%USERSWEB%/@WIKIWORD">@WIKIWORD</a></div><div class="foswikiRight foswikiSRRev"><span class="foswikiNew">NEW</span> - <a href="/trunk/bin/rdiff/TestCases/WebStatistics" rel='nofollow'>@DATE - @TIME</a>&nbsp;</div><br class="foswikiClear" /></div><!--/foswikiTopRow--><div class="foswikiBottomRow"><div class="foswikiSummary foswikiGrayText">Statistics for nop TestCases Web Month: Topic views: Topic saves: File uploads: Most popular topic views: Top contributors for topic save ...</div><!--/foswikiSummary-->

</div><!--/foswikiBottomRow--></div><!--/patternSearchResult--><div class="patternSearchResultCount">Number of topics: <span class="foswikiSearchResultCount">3</span></div><!--/patternSearchResultCount--><span class="patternSearched">Searched: <b><noautolink>(WebPreferences|WebStatistics|WebHome)$</noautolink></b></span><span id="foswikiNumberOfResultsContainer"></span><span id="foswikiModifySearchContainer"></span>
<h4 class="patternSearchResultsHeader" style="background-color:#FFD8AA"><span class="foswikiLeft"><b>Results from System web</b> retrieved at @TIME (@REX(GMT|Local))</span><span class="foswikiRight"></span><br class="foswikiClear" /></h4><div class="patternSearchResult"><div class="foswikiTopRow"><div class="foswikiLeft"><a href="/trunk/bin/view/System/WebHome"><b>WebHome</b></a></div><div class="foswikiRight foswikiSRAuthor"> <a href="%SCRIPTURLPATH{"view"}%/%USERSWEB%/@WIKIWORD">@WIKIWORD</a></div><div class="foswikiRight foswikiSRRev"><span class="foswikiNew">NEW</span> - <a href="/trunk/bin/rdiff/System/WebHome" rel='nofollow'>@DATE - @TIME</a>&nbsp;</div><br class="foswikiClear" /></div><!--/foswikiTopRow--><div class="foswikiBottomRow"><div class="foswikiSummary foswikiGrayText">Come to foswiki.org. Welcome to the System Web The place to learn about Foswiki features, and perform Foswiki system maintenance. This site is running Foswiki ...</div><!--/foswikiSummary-->

</div><!--/foswikiBottomRow--></div><!--/patternSearchResult--><div class="patternSearchResult"><div class="foswikiTopRow"><div class="foswikiLeft"><a href="/trunk/bin/view/System/WebPreferences"><b>WebPreferences</b></a></div><div class="foswikiRight foswikiSRAuthor"> <a href="%SCRIPTURLPATH{"view"}%/%USERSWEB%/@WIKIWORD">@WIKIWORD</a></div><div class="foswikiRight foswikiSRRev"><span class="foswikiNew">NEW</span> - <a href="/trunk/bin/rdiff/System/WebPreferences" rel='nofollow'>09 Jan 2009 - 12:00</a>&nbsp;</div><br class="foswikiClear" /></div><!--/foswikiTopRow--><div class="foswikiBottomRow"><div class="foswikiSummary foswikiGrayText">nop System Web Preferences The following settings are web preferences of the System web. These preferences override the site level preferences in . and ...</div><!--/foswikiSummary-->
</div><!--/foswikiBottomRow--></div><!--/patternSearchResult--><div class="patternSearchResult"><div class="foswikiTopRow"><div class="foswikiLeft"><a href="/trunk/bin/view/System/WebStatistics"><b>WebStatistics</b></a></div><div class="foswikiRight foswikiSRAuthor"> <a href="%SCRIPTURLPATH{"view"}%/%USERSWEB%/@WIKIWORD">@WIKIWORD</a></div><div class="foswikiRight foswikiSRRev"><span class="foswikiNew">NEW</span> - <a href="/trunk/bin/rdiff/System/WebStatistics" rel='nofollow'>@DATE - @TIME</a>&nbsp;</div><br class="foswikiClear" /></div><!--/foswikiTopRow--><div class="foswikiBottomRow"><div class="foswikiSummary foswikiGrayText">Statistics for nop System Web Month: Topic views: Topic saves: File uploads: Most popular topic views: Top contributors for topic save ...</div><!--/foswikiSummary-->

</div><!--/foswikiBottomRow--></div><!--/patternSearchResult--><div class="patternSearchResultCount">Number of topics: <span class="foswikiSearchResultCount">3</span></div><!--/patternSearchResultCount--><span class="patternSearched">Searched: <b><noautolink>(WebPreferences|WebStatistics|WebHome)$</noautolink></b></span><span id="foswikiNumberOfResultsContainer"></span><span id="foswikiModifySearchContainer"></span>
<h4 class="patternSearchResultsHeader" style="background-color:#FFEFA6"><span class="foswikiLeft"><b>Results from Main web</b> retrieved at @TIME (@REX(GMT|Local))</span><span class="foswikiRight"></span><br class="foswikiClear" /></h4><div class="patternSearchResult"><div class="foswikiTopRow"><div class="foswikiLeft"><a href="/trunk/bin/view/Main/WebHome"><b>WebHome</b></a></div><div class="foswikiRight foswikiSRAuthor"> <a href="%SCRIPTURLPATH{"view"}%/%USERSWEB%/@WIKIWORD">@WIKIWORD</a></div><div class="foswikiRight foswikiSRRev"><span class="foswikiNew">NEW</span> - <a href="/trunk/bin/rdiff/Main/WebHome" rel='nofollow'>@DATE - @TIME</a>&nbsp;</div><br class="foswikiClear" /></div><!--/foswikiTopRow--><div class="foswikiBottomRow"><div class="foswikiSummary foswikiGrayText">Welcome to the nop web Congratulations, you have finished installing Foswiki. This site is running Foswiki version , Plugin API version To learn more about ...</div><!--/foswikiSummary-->

</div><!--/foswikiBottomRow--></div><!--/patternSearchResult--><div class="patternSearchResult"><div class="foswikiTopRow"><div class="foswikiLeft"><a href="/trunk/bin/view/Main/WebPreferences"><b>WebPreferences</b></a></div><div class="foswikiRight foswikiSRAuthor"> <a href="%SCRIPTURLPATH{"view"}%/%USERSWEB%/@WIKIWORD">@WIKIWORD</a></div><div class="foswikiRight foswikiSRRev"><span class="foswikiNew">NEW</span> - <a href="/trunk/bin/rdiff/Main/WebPreferences" rel='nofollow'>@DATE - @TIME</a>&nbsp;</div><br class="foswikiClear" /></div><!--/foswikiTopRow--><div class="foswikiBottomRow"><div class="foswikiSummary foswikiGrayText">nop Main Web Preferences The following settings are web preferences of the Main web. These preferences overwrite the site level preferences in . and , ...</div><!--/foswikiSummary-->
</div><!--/foswikiBottomRow--></div><!--/patternSearchResult--><div class="patternSearchResult"><div class="foswikiTopRow"><div class="foswikiLeft"><a href="/trunk/bin/view/Main/WebStatistics"><b>WebStatistics</b></a></div><div class="foswikiRight foswikiSRAuthor"> <a href="%SCRIPTURLPATH{"view"}%/%USERSWEB%/@WIKIWORD">@WIKIWORD</a></div><div class="foswikiRight foswikiSRRev"><span class="foswikiNew">NEW</span> - <a href="/trunk/bin/rdiff/Main/WebStatistics" rel='nofollow'>@DATE - @TIME</a>&nbsp;</div><br class="foswikiClear" /></div><!--/foswikiTopRow--><div class="foswikiBottomRow"><div class="foswikiSummary foswikiGrayText">Statistics for nop Main Web Month: Topic views: Topic saves: File uploads: Most popular topic views: Top contributors for topic save and ...</div><!--/foswikiSummary-->

</div><!--/foswikiBottomRow--></div><!--/patternSearchResult--><div class="patternSearchResultCount">Number of topics: <span class="foswikiSearchResultCount">3</span></div><!--/patternSearchResultCount--><span class="patternSearched">Searched: <b><noautolink>(WebPreferences|WebStatistics|WebHome)$</noautolink></b></span><span id="foswikiNumberOfResultsContainer"></span><span id="foswikiModifySearchContainer"></span>
<h4 class="patternSearchResultsHeader" style="background-color:#B9DAFF"><span class="foswikiLeft"><b>Results from Sandbox web</b> retrieved at @TIME (@REX(GMT|Local))</span><span class="foswikiRight"></span><br class="foswikiClear" /></h4><div class="patternSearchResult"><div class="foswikiTopRow"><div class="foswikiLeft"><a href="/trunk/bin/view/Sandbox/WebHome"><b>WebHome</b></a></div><div class="foswikiRight foswikiSRAuthor"> <a href="%SCRIPTURLPATH{"view"}%/%USERSWEB%/@WIKIWORD">@WIKIWORD</a></div><div class="foswikiRight foswikiSRRev"><span class="foswikiNew">NEW</span> - <a href="/trunk/bin/rdiff/Sandbox/WebHome" rel='nofollow'>@DATE - @TIME</a>&nbsp;</div><br class="foswikiClear" /></div><!--/foswikiTopRow--><div class="foswikiBottomRow"><div class="foswikiSummary foswikiGrayText">nop Sandbox Web Utilities advanced search WebTopicList all topics in alphabetical order WebChanges recent topic changes in this web WebNotify ...</div><!--/foswikiSummary-->

</div><!--/foswikiBottomRow--></div><!--/patternSearchResult--><div class="patternSearchResult"><div class="foswikiTopRow"><div class="foswikiLeft"><a href="/trunk/bin/view/Sandbox/WebPreferences"><b>WebPreferences</b></a></div><div class="foswikiRight foswikiSRAuthor"> <a href="%SCRIPTURLPATH{"view"}%/%USERSWEB%/@WIKIWORD">@WIKIWORD</a></div><div class="foswikiRight foswikiSRRev"><span class="foswikiNew">NEW</span> - <a href="/trunk/bin/rdiff/Sandbox/WebPreferences" rel='nofollow'>@DATE - @TIME</a>&nbsp;</div><br class="foswikiClear" /></div><!--/foswikiTopRow--><div class="foswikiBottomRow"><div class="foswikiSummary foswikiGrayText">nop Sandbox Web Preferences The following settings are web preferences of the Sandbox web. These preferences overwrite the site level preferences in . and ...</div><!--/foswikiSummary-->
</div><!--/foswikiBottomRow--></div><!--/patternSearchResult--><div class="patternSearchResult"><div class="foswikiTopRow"><div class="foswikiLeft"><a href="/trunk/bin/view/Sandbox/WebStatistics"><b>WebStatistics</b></a></div><div class="foswikiRight foswikiSRAuthor"> <a href="%SCRIPTURLPATH{"view"}%/%USERSWEB%/@WIKIWORD">@WIKIWORD</a></div><div class="foswikiRight foswikiSRRev"><span class=foswikiNew>NEW</span> - <a href="/trunk/bin/rdiff/Sandbox/WebStatistics" rel='nofollow'>@DATE - @TIME</a>&nbsp;</div><br class="foswikiClear" /></div><!--/foswikiTopRow--><div class="foswikiBottomRow"><div class="foswikiSummary foswikiGrayText">Statistics for nop Sandbox Web Month: Topic views: Topic saves: File uploads: Most popular topic views: Top contributors for topic save ...</div><!--/foswikiSummary-->
</div><!--/foswikiBottomRow--></div><!--/patternSearchResult--><div class="patternSearchResultCount">Number of topics: <span class="foswikiSearchResultCount">3</span></div><!--/patternSearchResultCount-->
<!-- /expected -->
---++ Actual
<!-- actual -->
%SEARCH{
    "(WebPreferences|WebStatistics|WebHome)$"
    type="regex"
    scope="topic"
    web="TestCases, %SYSTEMWEB%, Main, Sandbox"
}%
<!-- /actual -->


---++ default search formatting, separator="-"
---+++ Expected
