%META:TOPICINFO{author="ProjectContributor" date="1266949232" format="1.1" version="1.2"}%
%META:TOPICPARENT{name="Macros"}%
#VarQUERY
---+++ QUERY -- get the value of meta-data
   * Uses the query syntax described in [[Syntax.QuerySearch][QuerySearch]] (and also used for [[System.VarIF][%IF]]) to get information about meta-data.
   * Syntax: =%<nop>QUERY{ "query" [ style="perl|json" ] }%=
   * See !QuerySearch for more details of how to write queries
   * Examples:
      * %<nop>QUERY{"form.name"}% gets the name of the form in the current topic
      * %<nop>QUERY{"fields[name='Firstname'].value"}% gets the value of the 'Firstname' form field in the current topic
      * %<nop>QUERY{"Firstname"}% gets the value of the 'Firstname' form field in the current topic (shorthand version)
      * %<nop>QUERY{"'System.DocumentGraphics'/attachments[1].name"}% gets a list of all the names of attachments on the topic 'System.DocumentGraphics'

Plain strings (such as field values) are returned _without_ quotes. Simple arrays of scalars are also returned without quotes, in a comma-separated list (beware of values that contain commas!).

More complex data structures (e.g. arrays of hashes) will be returned as Perl code strings generated by running through CPAN:Data::Dumper.

You can make the macro generate different output formats using the =style= parameter:
   * =style="perl"= - generates values as Perl code strings
   * =style="json"= - generates values as JSON strings, suitable for reading by browsers.

   * Related: [[%IF{"'%INCLUDINGTOPIC%'='Macros'" then="#"}%VarMETA][META]] [[%IF{"'%INCLUDINGTOPIC%'='Macros'" then="#"}%QuerySearch][QuerySearch]]